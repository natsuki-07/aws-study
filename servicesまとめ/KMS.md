# AWS Key Management Service(KMS)  
暗号キーを簡単に作成して管理し、幅広いAWSのサービスやアプリケーションでの使用を制御できるようになる。  
AWSの他のサービスと統合されているため、これらのサービスに格納されているデータの暗号化と、こうした暗号を複合するキーへのアクセス制御が容易になる。AWS KMSはCloudTrailとも統合されていて、だれがどのキーを、どのリソースで、いつ使用したかを監査できる。  

キーのサイクルと権限の一元管理ができる。いつでも新しいキーを作成でき、キーを使用できるユーザーとは別にキーを管理できるユーザーを制御できる  

データ暗号化機能としてはEncrypt, Decrypt(復号のためのAPI), GanerateDataKey(カスタマーデータキーを生成)の3つのAPIがある。  
  
## マスターキーとデータキー  
主に2つのマスターキーとデータキーを管理し、Customer Master Key(CMK)およびCustomer Data Key(CDK)と表現される。CMKはデータキーを暗号化するための鍵。CDKはデータを暗号化するための鍵  
データの暗号化に際して、データキーでデータを暗号化してから、そのデータキーをマスターキーで暗号化する手法をとっている。これはデータキー保護のためでこの手法はエンベロープ暗号化と呼ばれる。  
  
クライアントサイド暗号化はユーザー側の処理で暗号化する方式。多くの場合にAWSが提供するSDKを使う。  
これに対してAWS側の処理で暗号化するのがサーバーサイド暗号化。
  
## 料金  
マスターキーは生成された場所またはカスタムキーのインポート場所にかかわらずそれが削除されるまで1USD/月の料金がかかります。  


# AWS CloudHSM  
クラウドベースのハードウェアセキュリティモジュール(HSM)。これによりAWSクラウドで暗号キーを簡単に生成して使用できるようになる。  

AWS CloudHSMを使用すると業界標準のAPIを使用して、カスタムアプリケーションを統合できる。  

ウェブサーバーのSSL/TLS処理をオフロードすることができる。CloudHSM内にあるウェブサーバーのプライベートキーを保存することでウェブサーバーの負担を軽減し、セキュリティを強化できる。  

## 料金
CloudHSM では、HSM を起動してから終了するまで、各 HSM ごとに 1 時間単位で料金が発生  

## KMSとHSMの違い  
大きな違いは管理の厳密性にある    
HSMは専用のハードウェアで暗号キーを保存するのに対して、KSMはシステムを共有する。システムはほかの組織はアクセスできないがHSMのほうがより安心して使える。    
  
価格はKMSのほうが低く、HSMのほうが高い  


||  CloudHSM  |  KMS  |
|  ----  |  ----  |  ----  |
|  専有性  |  VPC内の専有ハードウェアデバイス  |  AWSが管理するマルチテナント  |
|  可用性  |  ユーザー側が管理  |  AWS側が高可用性・耐久性を設計  |
|  信頼の基点  |  ユーザー側が管理  |  AWS側が管理  |
|  暗号化機能  |  共通鍵及び公開鍵  |  共通鍵  |
|  コスト  |  ほぼ固定費  |  従量課金  |  
  
